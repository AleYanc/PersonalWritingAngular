<div *ngIf="loading == true">
    <p-messages severity="info">
        <ng-template pTemplate>
            <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
            <div class="ml-2">Loading character</div>
        </ng-template>
    </p-messages>
</div>

<div class="div" *ngIf="loading == false">
    <p-toast></p-toast>
    <p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>
    <div class="grid">
        <div class="col-6">
            <div class="grid .grid-nogutter">
                <div class="col-6 bg-cyan-50 flex align-items-center justify-content-center">
                    <img src="{{character.imageUrl}}" alt="" height="450px" width="300px" style="object-fit: contain;">
                </div>
                <div class="col-6 bg-cyan-100 flex flex-column align-items-center justify-content-center">
                    <h3>{{character.firstName}} {{character.lastName}}</h3>
                    <p>{{character.age}} years old</p>
                    <p>{{character.birthday}}</p>
                </div>
            </div>
        </div>
        <div class="col-6 bg-green-100">
            <div class="grid">
                <div class="col-6 flex flex-column align-items-center justify-content-center">
                    <h3>Main physical features</h3>
                    <p><strong>Height: </strong> {{character.height}} cm</p>
                    <p><strong>Weight: </strong> {{character.weight}} kg</p>
                    <p><strong>Eye color: </strong> {{character.eyeColor}}</p>
                    <p><strong>Hair color: </strong> {{character.hairColor}}</p>
                    <p><strong>Skin color: </strong> {{character.skinColor}}</p>
                </div>
    
                <div class="col-6 flex flex-column align-items-center justify-content-center text-left">
                    <h3>Traits</h3>
                    <h4>Good</h4>
                    <ul>
                        <li *ngFor="let gTrait of goodTraits">{{gTrait}}</li>
                    </ul>
                    <h4>Bad</h4>
                    <ul>
                        <li *ngFor="let bTrait of badTraits">{{bTrait}}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="grid">
        <div class="col-12 bg-cyan-200 text-center">
            <h4>Skills</h4>
            <p-table [value]="skills" [tableStyle]="{ 'min-width': '50rem' }">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Code</th>
                        <th>Name</th>
                        <th>Rank</th>
                        <th>Description</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-skill>
                    <tr>
                        <td>#{{skill.id}}</td>
                        <td><strong>{{skill.name}}</strong></td>
                        <td>{{skill.rank}}</td>
                        <td [innerHTML]="skill.description"></td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
    <div class="grid">
        <div class="col-6">
            <h3>Description</h3>
            <div [innerHTML]="character.description"></div>
            <h3>Main wish: {{character.mainWish}}</h3>
            <h3>Main fear: {{character.mainFear}}</h3>
            <h4 class="text-center"><em>Notes</em></h4>
            <hr class="w-4">
            <div [innerHTML]="character.notes"></div>
        </div>
        <div class="col-6">
            <h3>Actions</h3>
            <p-button label="Edit" styleClass="m-2" routerLink="/characters/edit/{{character.id}}"></p-button>
            <p-button label="Delete" styleClass="m-2 p-button-danger" (click)="confirm1(character.id)"></p-button>
        </div>
    </div>
    <div class="grid">
        <div class="col-6">
            <h3>Appears in: </h3>
            <ul>
                <li *ngFor="let book of characterBooks"> <strong>ID {{book.bookId}}</strong> - {{book.bookTitle}}</li>
            </ul>
        </div>
    </div>
</div>
